<?php
//// サーバー管理設定 ////

//--- 必須設定

// Web上の絶対パス(URL)(最後にスラッシュを付けてください)
define('OPENPNE_URL', 'http://sns.example.com/');

// DBサーバ設定
$GLOBALS['_OPENPNE_DSN_LIST']['main'] = array(
'dsn'  => array(
    'phptype'  => 'mysql',
    'username' => '',
    'password' => '',
    'hostspec' => 'localhost',
    'database' => '',
    'new_link' => false,
    ),
);

// DB暗号化キー(56バイト以内のASCII文字列)
define('ENCRYPT_KEY', '');

// メールサーバードメイン
// 携帯メール投稿の宛先などのドメイン名に使われる
define('MAIL_SERVER_DOMAIN', 'mail.example.com');


//--- オプション設定

// デバッグモード
// 0: off ... エラー非表示、エラーログを記録する
// 1: on  ... エラー表示、エラーログを記録しない
// 2: on  ... 1 + Smartyデバッグコンソール 
define('OPENPNE_DEBUGGING', 1);

// 無効にするモジュール
//$GLOBALS['_OPENPNE_DISABLE_MODULES'] = array('admin', 'setup');

// メンテナンスモード
// true: ユーザーにメンテナンス画面を表示
define('OPENPNE_UNDER_MAINTENANCE', false);

// メンテナンス画面に表示させるテキスト
// HTMLが使用できます
// 未入力の場合は、標準のテキストが表示されます
define('OPENPNE_MAINTENANCE_TEXT', '');

// メンテナンス中でも表示するモジュール名
$GLOBALS['_OPENPNE_MAINTENANCE_MODULES'] = array('admin');

// 1.8以前形式のURLでアクセスした場合の動作設定
// 0    : 直接新URLへ移動する
// n(>0): URL変更お知らせ画面を表示、n秒後に移動する
// -1   : URL変更お知らせ画面を表示、自動的に移動しない
define('WAIT_REDIRECT_TIME', 5);

// Crypt_Blowfish ライブラリの旧バージョン使用設定
// 2.2以前からのアップグレードでログインできないなどの
//暗号化まわりの不具合が起こった場合はtrueに設定してください
define('OPENPNE_USE_OLD_CRYPT_BLOWFISH', false);

// ファンクションキャッシュ使用設定
//有効にした場合は、最新情報の表示に遅延が起こることがあります
define('OPENPNE_USE_FUNCTION_CACHE', false);

// このオプションを有効にするためにはOPENPNE_USE_FUNCTION_CACHEをtrueにする必要があります。
// ファンクションキャッシュのキャッシュを保存するストレージにmemcacheを使用
define('OPENPNE_USE_FUNCTION_CACHE_MEMCACHE', false);

// OPENPNE_USE_FUNCTION_CACHE_MEMCACHEがtrueの場合の
// ファンクションキャッシュ用memcacheサーバ設定
$GLOBALS['_OPENPNE_MEMCACHE_LIST']['func_cache'] = array(
'dsn' => array(
    'hostspec' => '127.0.0.1',
    ),
);

// MySQL ヒント使用設定
define('OPENPNE_USE_MYSQL_HINT', true);

// セッション情報を保存するストレージ
// 0:ファイル
// 1:データベース
// 2:memcache(要PECL::memcache)
define('SESSION_STORAGE', 0);

// 確認画面用の一時画像をDBに保存するかどうか
define('OPENPNE_TMP_IMAGE_DB', false);

// 確認画面用の一時ファイルをDBに保存するかどうか
define('OPENPNE_TMP_FILE_DB', false);

///
// DBサーバ設定
///

// メインデータ読み込み用DB(オプション)
//$GLOBALS['_OPENPNE_DSN_LIST']['main_reader'][] = array(
//'priority' => 1,
//'dsn' => array(
//    'phptype'  => 'mysql',
//    'username' => '',
//    'password' => '',
//    'hostspec' => 'localhost',
//    'database' => '',
//    'new_link' => false,
//    ),
//);
//$GLOBALS['_OPENPNE_DSN_LIST']['main_reader'][] = array(
//'priority' => 1,
//'dsn' => array(
//    'phptype'  => 'mysql',
//    'username' => '',
//    'password' => '',
//    'hostspec' => 'localhost',
//    'database' => '',
//    'new_link' => false,
//    ),
//);

// セッションデータ保存用DB(オプション)
//$GLOBALS['_OPENPNE_DSN_LIST']['session'] = array(
//'dsn' => array(
//    'phptype'  => 'mysql',
//    'username' => '',
//    'password' => '',
//    'hostspec' => 'localhost',
//    'database' => '',
//    'new_link' => false,
//    ),
//);

// セッションデータ保存用Memcache(オプション)
$GLOBALS['_OPENPNE_MEMCACHE_LIST']['session'] = array(
'dsn' => array(
    'hostspec' => '127.0.0.1',
    ),
);

// 画像データ保存用DB(オプション)
//$GLOBALS['_OPENPNE_DSN_LIST']['image'] = array(
//'dsn' => array(
//    'phptype'  => 'mysql',
//    'username' => '',
//    'password' => '',
//    'hostspec' => 'localhost',
//    'database' => '',
//    ),
//);

///
// SSL設定
///

// 特定ページだけのSSLを使用するかどうか
define('OPENPNE_USE_PARTIAL_SSL', false);

// SSL使用状況をリクエストパラメータから取得するかどうか
define('OPENPNE_USE_SSL_PARAM', false);

// SSL用URL (Cookieの値を引き継ぐため、OPENPNE_URL と同一ドメイン・パスである必要があります)
define('OPENPNE_SSL_URL', 'https://sns.example.com/');

// SSLを使用することが必須であるモジュールリスト
$GLOBALS['_OPENPNE_SSL_REQUIRED_MODULES'] = array('admin');

// SSLを使用することが必須であるアクションリスト
$GLOBALS['_OPENPNE_SSL_REQUIRED'] = array(
'pc' => array(
    'page_o_regist_prof',  'page_o_regist_prof_confirm', 'do_o_regist_prof',
    'page_o_regist_intro', 'page_o_ri', 'page_o_regist_end',
    'page_h_config_prof', 'page_h_config_prof_confirm', 'do_h_config_prof',
    'page_h_config_ktai', 'do_h_config_ktai_send',
    'page_h_config', 'do_h_config_1', 'do_h_config_2', 'do_h_config_3',
    'page_o_login', 'page_o_tologin', 'do_o_login',
    'page_o_public_invite','do_o_public_invite',
    'page_h_invite','page_h_invite_confirm','do_h_invite_insert_c_invite',
    'page_o_password_query','do_o_password_query',
),
'ktai' => array(
    'page_o_login', 'do_o_login', 'do_o_easy_login',
    'page_o_login2', 'do_o_update_ktai_address',
    'page_o_regist_pre', 'page_o_regist_input', 'do_o_insert_c_member',
    'page_o_regist_end',
    'page_o_password_query', 'do_o_password_query',
    'page_h_config_prof', 'do_h_config_prof_update_c_member',
    'page_h_config_easy_login', 'do_h_config_easy_login',
    'page_h_config_mail', 'do_h_config_mail_insert_c_ktai_address_pre',
    'page_h_pc_send', 'page_h_pc_send_confirm', 'do_h_pc_send_insert_c_pc_address_pre',
    'page_h_config_password_query', 'do_h_config_password_query_update_password_query',
    'page_h_config_password', 'do_h_config_password_update_password',
    'page_h_config', 'page_h_invite', 'do_h_invite_insert_c_invite',
));

// SSLを使用するかどうかをユーザーが選択できるアクションリスト
$GLOBALS['_OPENPNE_SSL_SELECTABLE'] = array(
'pc' => array(
),
'ktai' => array(
));

///
// パス設定
///

define('OPENPNE_LIB_DIR'    , OPENPNE_DIR . '/lib');
define('OPENPNE_VAR_DIR'    , OPENPNE_DIR . '/var');
define('OPENPNE_WEBAPP_DIR' , OPENPNE_DIR . '/webapp');
define('OPENPNE_MODULES_DIR', OPENPNE_WEBAPP_DIR . '/modules');
define('OPENPNE_RSS_CACHE_DIR', OPENPNE_VAR_DIR . '/rss_cache');
define('OPENPNE_PUBLIC_HTML_DIR', OPENPNE_DIR . '/public_html');

///
// webapp_ext ディレクトリ使用設定
///

define('USE_EXT_DIR', false);
define('OPENPNE_WEBAPP_EXT_DIR' , OPENPNE_DIR . '/webapp_ext');
define('OPENPNE_MODULES_EXT_DIR', OPENPNE_WEBAPP_EXT_DIR . '/modules');

///
// webapp_biz ディレクトリ使用設定
//
// BIZ使用設定は管理画面に移動しました
// define('USE_EXT_DIR', false);
define('OPENPNE_WEBAPP_BIZ_DIR' , OPENPNE_DIR . '/webapp_biz');
define('OPENPNE_MODULES_BIZ_DIR', OPENPNE_WEBAPP_BIZ_DIR . '/modules');

///
// デバッグ、エラーハンドリング、ログ設定
///

error_reporting(E_ALL ^ E_NOTICE);

switch(OPENPNE_DEBUGGING) {
// テスト開発環境
case 2:
    $GLOBALS['SMARTY']['debugging'] = true;
case 1:
    ini_set('display_errors', true);
    ini_set('log_errors', false);
    break;
// 本番運用環境
case 0:
default:
    ini_set('display_errors', false);
    ini_set('log_errors', true);
    ini_set('error_log', OPENPNE_VAR_DIR . '/log/php_errors.log');
    break;
}

// アクセスログを取得するかどうか(c_access_log)
define('LOG_C_ACCESS_LOG', true);

// カスタムログ用の関数名を指定します
define('OPENPNE_LOG_FUNCTION', '');

///
// セッション・クッキー設定
///

ini_set('session.gc_probability',1);
ini_set('session.gc_divisor',10000);

ini_set('session.gc_maxlifetime', 432000); // 5 days
//session_save_path('/tmp');

// PC版
// セッション生成時からの有効期限(秒) (0 の場合は無期限)
$GLOBALS['OpenPNE']['common']['session_lifetime'] = 0;
// セッションの有効期限(秒)
$GLOBALS['OpenPNE']['common']['session_idletime'] = 432000; // 5 days

// 携帯版
// セッション生成時からの有効期限(秒) (0 の場合は無限)
$GLOBALS['OpenPNE']['ktai']['session_lifetime'] = 0;
// セッションの有効期限(秒)
$GLOBALS['OpenPNE']['ktai']['session_idletime'] = 3600; // 1 hour

// 管理画面版
// セッション生成時からの有効期限(秒) (0 の場合は無限)
$GLOBALS['OpenPNE']['admin']['session_lifetime'] = 0;
// セッションの有効期限(秒)
$GLOBALS['OpenPNE']['admin']['session_idletime'] = 86400; // 1 day

// セッションにOPENPNE_URLを保存しておく
// 同一サーバ上で複数のSNSを運用する場合のセッションの混同を防ぐ
// falseからtrueにした場合、または2.4RC1以前のバージョンからアップデートした場合
// それまでのセッションが無効になりログアウトされます
define('OPENPNE_SESSION_CHECK_URL', true);

///
// 画像
///

// 画像を別サーバに設定する場合に指定する
//define('OPENPNE_IMG_URL', 'http://img.example.com/');

//// 画像サーバ用設定 ////
//define('OPENPNE_IS_IMG_SERVER', false);

// 画像キャッシュをpublic_html以下に置くかどうか(要mod_rewrite)
define('OPENPNE_IMG_CACHE_PUBLIC', false);

// 画像キャッシュディレクトリ(要書き込み権限)
if (OPENPNE_IMG_CACHE_PUBLIC) {
    define('OPENPNE_IMG_CACHE_DIR', OPENPNE_DIR . '/public_html/img');
} else {
    define('OPENPNE_IMG_CACHE_DIR', OPENPNE_VAR_DIR . '/img_cache');
}

// 画像変換時に許可する解像度のリスト (幅x高さ)
// (空の配列を指定すると無制限になります)
$GLOBALS['_OPENPNE_IMG_ALLOWED_SIZE'] = array('76x76', '120x120', '180x180', '240x320');

// 画像キャッシュのファイル名のprefix
define('OPENPNE_IMG_CACHE_PREFIX', 'img_cache_');

// 画像変換後のJPEGのQUALITY値
define('OPENPNE_IMG_JPEG_QUALITY', 75);

// ImageMagick使用設定
// 0: off ... ImageMagickを使わない
// 1: on  ... GIFのみImageMagickを使う
// 2: on  ... JEPG,PNG,GIFにImageMagickを使う(ただし、GDも必要)
define('USE_IMAGEMAGICK', 0);

// ImageMagick の convertコマンドのパス
define('IMGMAGICK_APP', '/usr/bin/convert');
//define('IMGMAGICK_APP', '"C:\Program Files\ImageMagick-6.2.5-Q16\convert"');

// ImageMagick のオプション(デフォルトは -resize)
//define('IMGMAGICK_OPT', '-thumbnail');

// アップロード画像のファイルサイズ制限(KB)
define('IMAGE_MAX_FILESIZE', 300);

// アップロード画像の大きさ制限(ピクセル)
// 0 を指定した場合は無制限
define('IMAGE_MAX_WIDTH', 0);
define('IMAGE_MAX_HEIGHT', 0);

// 携帯版「大」サイズ画像表示時の解像度制限
// （$GLOBALS['_OPENPNE_IMG_ALLOWED_SIZE'] で許可された解像度を指定してください）
define('OPENPNE_IMG_KTAI_MAX_WIDTH', 240);
define('OPENPNE_IMG_KTAI_MAX_HEIGHT', 320);

///
// ファイルアップロード機能
///

// ファイルアップロード機能を使用するかどうか
define('OPENPNE_USE_FILEUPLOAD', false);

// アップロードファイルのファイルサイズ制限(KB)
define('FILE_MAX_FILESIZE', 300);

// 許可する拡張子のリスト(カンマ(,)区切り)
// 未指定の場合は全て許可
//define('FILE_ALLOWED_EXTENTIONS', 'pdf,xls,ppt,zip');
define('FILE_ALLOWED_EXTENTIONS', '');

///
// 外部RSS取得
///

// 一度に取得するRSSの件数
define('RSS_CACHE_LIMIT', 100);

///
// 携帯メール投稿
///

// 宛先メールアドレスのprefix
//define('MAIL_ADDRESS_PREFIX', 'sns_');

// 宛先メールアドレスをハッシュにするか
define('MAIL_ADDRESS_HASHED', true);

// 受信メールの文字コード(Content-Typeから取得できない場合に使う)
//define('MAIL_FROM_ENCODING', 'JIS');
define('MAIL_FROM_ENCODING', 'auto');

// メールログを取るかどうか(var/log/mail.log)
define('MAIL_DEBUG_LOG', false);

///
// メール送信設定
///

// 半角カタカナを全角カタカナに変換して送信する
define('MAIL_HAN2ZEN', true);

// MTAに渡すヘッダの改行コード(LF->CRLF の自動変換が行われることへの対策)
//define('MAIL_HEADER_SEP', 'CRLF');
define('MAIL_HEADER_SEP', 'LF');

// Envelope-From ヘッダを設定するかどうか(safe_mode の場合は false に設定してください)
define('MAIL_SET_ENVFROM', true);

// Envelope-From で設定するメールアドレス
//(指定しない場合は、管理者メールアドレス(Fromと同じ))
//define('MAIL_ENVFROM', 'system@example.com');

///
// mbstring設定
///

mb_language('Japanese');
ini_set('mbstring.detect_order', 'auto');
ini_set('mbstring.http_input'  , 'auto');
ini_set('mbstring.http_output' , 'pass');
ini_set('mbstring.internal_encoding', 'UTF-8');
ini_set('mbstring.script_encoding'  , 'UTF-8');
ini_set('mbstring.substitute_character', 'none');
mb_regex_encoding('UTF-8');

// Validatorで全角スペースを削除するかどうか
// mb_ereg_replace でエラーが出る場合は false にしてください
define('OPENPNE_TRIM_DOUBLEBYTE_SPACE', true);

///
// API通信設定
///

// API通信使用設定
define('OPENPNE_USE_API', false);

// セッション鍵生成用文字列(適当な文字列に変更してください)
define('OPENPNE_API_TOKEN', 'OpenPNE');

// 許可するIPリスト('any'が含まれている場合はIPをチェックしません)
$GLOBALS['_OPENPNE_API_IP_LIST'] = array(
'127.0.0.1',
//'192.168.0.1',
//'any',
);

// クライアントのIPアドレスのあるサーバ変数名($_SERVER['REMOTE_ADDR'])
//define('SERVER_IP_KEY', 'HTTP_X_FORWARDED_FOR');
define('SERVER_IP_KEY', 'REMOTE_ADDR');

///
// memory_limit設定
///
// ini_set('memory_limit','32M');

///
// umask設定
///

umask(0);

///
// Google Maps API key
// http://www.google.com/apis/maps/ から取得
///
define('GOOGLE_MAPS_API_KEY', '');

///
// Google AJAX Search API key
// http://code.google.com/apis/ajaxsearch/signup.html  から取得
///
define('GOOGLE_AJAX_SEARCH_API_KEY', '');

//// SNSアプリケーション設定 ////

// 管理画面のURL設定
//(OPENPNE_URL)?m=ADMIN_MODULE_NAME (例. http://sns.example.com/?m=admin)
define('ADMIN_MODULE_NAME', 'admin');

// 管理画面の初期設定項目を表示するかどうか
define('ADMIN_INIT_CONFIG', true);

// 管理画面にバージョン情報を表示するかどうか
define('DISPLAY_VERSION', true);

// 管理画面にOpenPNE更新情報(RSS)を表示するかどうか
define('DISPLAY_OPENPNE_INFO', true);

// OpenPNE更新情報のURL設定
define('OPENPNE_INFO_URL', 'http://info.openpne.jp/rss');

// 天気予報ページのURL設定
define('OPENPNE_WEATHER_URL', 'http://weather.yahoo.co.jp/weather/');

// 携帯版でUser-Agentのチェックをするかどうか
define('CHECK_KTAI_UA', true);

// 携帯版でIP制限機能を使用するかどうか
define('CHECK_KTAI_IP', false);

// 許可するIP帯域のリスト
// 'IP Adress/BitMask' の形式で入力してください
$GLOBALS['_OPENPNE_KTAI_IP_LIST'] = array(
    // DoCoMo (2006/10/23更新)
    // http://www.nttdocomo.co.jp/service/imode/make/content/ip/index.html
    '210.153.84.0/24', '210.136.161.0/24', '210.153.86.0/24',

    // SoftBank (2007/10/9更新)
    // http://developers.softbankmobile.co.jp/dp/tech_svc/web/ip.php
    '123.108.236.0/24', '123.108.237.0/27', '202.179.204.0/24',
    '202.253.96.224/27', '210.146.7.192/26', '210.146.60.192/26',
    '210.151.9.128/26', '210.169.130.112/28', '210.175.1.128/25',
    '210.228.189.0/24', '211.8.159.128/25',

    // au (2007/09/03更新)
    // http://www.au.kddi.com/ezfactory/tec/spec/ezsava_ip.html
    '210.169.40.0/24', '210.196.3.192/26', '210.196.5.192/26',
    '210.230.128.0/24', '210.230.141.192/26', '210.234.105.32/29',
    '210.234.108.64/26', '210.251.1.192/26', '210.251.2.0/27',
    '211.5.1.0/24', '211.5.2.128/25', '211.5.7.0/24', '218.222.1.0/24',
    '61.117.0.0/24', '61.117.1.0/24', '61.117.2.0/26', '61.202.3.0/24',
    '219.108.158.0/26', '219.125.148.0/24', '222.5.63.0/24', '222.7.56.0/24',
    '222.5.62.128/25', '222.7.57.0/24', '59.135.38.128/25', '219.108.157.0/25',
    '219.125.151.128/25', '219.125.145.0/25', '121.111.231.0/25',

    // WILLCOM (2007/09/03更新)
    // http://www.willcom-inc.com/ja/service/contents_service/club_air_edge/for_phone/ip/
    '61.198.142.0/24', '219.108.14.0/24', '61.198.161.0/24', '219.108.0.0/24',
    '61.198.249.0/24', '219.108.1.0/24', '61.198.250.0/24', '219.108.2.0/24',
    '61.198.253.0/24', '219.108.3.0/24', '61.198.254.0/24', '219.108.4.0/24',
    '61.198.255.0/24', '219.108.5.0/24', '61.204.3.0/25', '219.108.6.0/24',
    '61.204.4.0/24', '221.119.0.0/24', '61.204.6.0/25', '221.119.1.0/24',
    '125.28.4.0/24', '221.119.2.0/24', '125.28.5.0/24', '221.119.3.0/24',
    '125.28.6.0/24', '221.119.4.0/24', '125.28.7.0/24', '221.119.5.0/24',
    '125.28.8.0/24', '221.119.6.0/24', '211.18.235.0/24', '221.119.7.0/24',
    '211.18.238.0/24', '221.119.8.0/24', '211.18.239.0/24', '221.119.9.0/24',
    '125.28.11.0/24', '125.28.13.0/24', '125.28.12.0/24', '125.28.14.0/24',
    '125.28.2.0/24', '125.28.3.0/24', '211.18.232.0/24', '211.18.233.0/24',
    '211.18.236.0/24', '211.18.237.0/24', '125.28.0.0/24', '125.28.1.0/24',
    '61.204.0.0/24', '210.168.246.0/24', '210.168.247.0/24', '219.108.7.0/24',
    '61.204.2.0/24', '61.204.5.0/24', '61.198.129.0/24', '61.198.140.0/24',
    '61.198.141.0/24', '125.28.15.0/24', '61.198.165.0/24', '61.198.166.0/24',
    '61.198.168.0/24', '61.198.169.0/24', '61.198.170.0/24', '61.198.248.0/24',
    '125.28.16.0/24', '125.28.17.0/24', '211.18.234.0/24', '219.108.8.0/24',
    '219.108.9.0/24', '219.108.10.0/24', '61.198.138.100/32','61.198.138.101/32',
    '61.198.138.102/32', '61.198.139.160/28', '61.198.139.128/27', '61.198.138.103/32',
    '61.198.139.0/29', '219.108.15.0/24',
);

// コミュニティに地図を表示するかどうか
define('OPENPNE_USE_COMMU_MAP', true);

// メール一斉送信のメールキューの使用
define('OPENPNE_MAIL_QUEUE', false);
// メールキューで一度に送信するメールの数
define('SEND_MAIL_QUEUE_NUM', 10);

// メッセージ一斉送信のメッセージキューの使用
define('OPENPNE_MESSAGE_QUEUE', false);
// メッセージキューで一度に送信するメッセージの数
define('SEND_MESSAGE_QUEUE_NUM', 10);

// CAPTCHA（画像のなかの文字列をメンバーに入力させる認証方式）を使用するかどうか
define('OPENPNE_USE_CAPTCHA', true);

// 外部認証を使用するかどうか
define('IS_SLAVEPNE' , false);

// IS_SLAVEPNEがtrueの場合のauthオプション
$GLOBALS['_OPENPNE_AUTH_CONFIG'] = 
array(
'storage'=>"DB",
'options'=>array(
    'dsn'         => array(
        'phptype'  => 'mysql',
        'username' => 'root',
        'password' => '',
        'hostspec' => 'localhost',
        'database' => '',
        'new_link' => true,
        ),
    'table'       => '',
    'usernamecol' => 'username',
    'passwordcol' => 'password',
    'cryptType'   => 'none',
    ),
);

//画像へのアクセスをSNS認証する
//※画像静的化機能を用いている場合は利用できません
define('CHECK_IMG_AUTH', false);

?>
